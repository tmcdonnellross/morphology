<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Morphology Practice â€” Fixed</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: Arial, Helvetica, sans-serif; }
    .card { transition: transform .2s, box-shadow .2s; }
    .card:hover { transform: translateY(-4px); box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1); }
    .drop-zone { border: 2px dashed #cbd5e1; background:#f1f5f9; transition: background .2s; }
    .drop-zone.drag-over { background:#e0e7ff; border-color:#818cf8; }
    .draggable { cursor: grab; user-select:none; }
    .draggable:active { cursor: grabbing; }
    .hunt-word.selected { background-color:#c7d2fe; border-color:#818cf8; color:#4338ca; }
    .bg-activity-sums        { background-color:#ecfdf5; }
    .bg-activity-cloze       { background-color:#eff6ff; }
    .bg-activity-matrix      { background-color:#f5f3ff; }
    .bg-activity-hunt        { background-color:#fdf2f8; }
    .bg-activity-chaining    { background-color:#fefce8; }
    .bg-activity-default     { background-color:#f8fafc; }
  </style>
</head>
<body class="bg-activity-default text-slate-800">
<div class="min-h-screen p-4 sm:p-6 lg:p-8" id="app">
  <main id="page-main-menu" class="max-w-4xl mx-auto">
    <header class="text-center mb-10">
      <h1 class="text-4xl sm:text-5xl font-bold text-slate-900">Morphology Practice</h1>
      <p class="mt-2 text-lg text-slate-600">Select a category to start learning.</p>
    </header>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <button data-cat="prefixes" class="card bg-white p-6 rounded-2xl shadow-md border flex flex-col items-center text-center">
        <div class="bg-violet-100 text-violet-600 p-4 rounded-xl mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"/></svg>
        </div>
        <h2 class="text-2xl font-semibold text-slate-900">Prefixes</h2>
      </button>
      <button data-cat="suffixes" class="card bg-white p-6 rounded-2xl shadow-md border flex flex-col items-center text-center">
        <div class="bg-sky-100 text-sky-600 p-4 rounded-xl mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z"/><path d="m13 13 6 6"/></svg>
        </div>
        <h2 class="text-2xl font-semibold text-slate-900">Suffixes</h2>
      </button>
      <button data-cat="bases" class="card bg-white p-6 rounded-2xl shadow-md border flex flex-col items-center text-center">
        <div class="bg-emerald-100 text-emerald-600 p-4 rounded-xl mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14"/><path d="M5 12h14"/></svg>
        </div>
        <h2 class="text-2xl font-semibold text-slate-900">Base Words</h2>
      </button>
    </div>
  </main>

  <div id="page-morpheme-list" class="hidden max-w-5xl mx-auto">
    <header class="mb-8">
      <button id="btn-back-main" class="flex items-center text-slate-600 hover:text-slate-900 font-medium">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>Back to categories
      </button>
      <h1 id="morpheme-list-title" class="text-3xl font-bold text-slate-900 mt-2"></h1>
    </header>
    <div id="morpheme-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"></div>
  </div>

  <div id="page-activity-menu" class="hidden max-w-4xl mx-auto">
    <header class="mb-10">
      <button id="back-to-morpheme-list" class="flex items-center text-slate-600 hover:text-slate-900 font-medium">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>Back to list
      </button>
      <div class="text-center">
        <h1 class="text-4xl font-bold text-slate-900">Activities for <span id="selected-morpheme-title" class="text-violet-600"></span></h1>
        <p class="mt-2 text-lg text-slate-600">Choose an activity to practice this morpheme.</p>
      </div>
    </header>
    <div id="activity-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <div data-activity="page-word-sums" class="card cursor-pointer bg-white p-6 rounded-2xl shadow-md border">
        <h2 class="text-xl font-semibold text-slate-900 mb-1">Word Sums</h2>
        <p class="text-slate-500 text-sm">Combine morphemes to build words.</p>
      </div>
      <div data-activity="page-fill-in-blanks" class="card cursor-pointer bg-white p-6 rounded-2xl shadow-md border">
        <h2 class="text-xl font-semibold text-slate-900 mb-1">Fill-in-the-Blanks</h2>
        <p class="text-slate-500 text-sm">Drag words into the correct sentences.</p>
      </div>
      <div data-activity="page-word-matrix" class="card cursor-pointer bg-white p-6 rounded-2xl shadow-md border">
        <h2 class="text-xl font-semibold text-slate-900 mb-1">Word Matrix</h2>
        <p class="text-slate-500 text-sm">Combine morphemes from the grid.</p>
      </div>
      <div data-activity="page-morpheme-hunt" class="card cursor-pointer bg-white p-6 rounded-2xl shadow-md border">
        <h2 class="text-xl font-semibold text-slate-900 mb-1">Morpheme Hunt</h2>
        <p class="text-slate-500 text-sm">Find words with the target morpheme.</p>
      </div>
      <div data-activity="page-spelling-chaining" class="card cursor-pointer bg-white p-6 rounded-2xl shadow-md border">
        <h2 class="text-xl font-semibold text-slate-900 mb-1">Spelling Chaining</h2>
        <p class="text-slate-500 text-sm">Build a chain of words step-by-step.</p>
      </div>
    </div>
  </div>

  <div id="page-word-sums" class="hidden max-w-3xl mx-auto"></div>
  <div id="page-fill-in-blanks" class="hidden max-w-4xl mx-auto"></div>
  <div id="page-word-matrix" class="hidden max-w-5xl mx-auto"></div>
  <div id="page-morpheme-hunt" class="hidden max-w-4xl mx-auto"></div>
  <div id="page-spelling-chaining" class="hidden max-w-3xl mx-auto"></div>
</div>

<!-- Minimal templates to validate navigation (activities load later via JS) -->
<template id="word-sums-template"><div class="p-4">Sums</div></template>
<template id="fill-in-blanks-template"><div class="p-4">Cloze</div></template>
<template id="word-matrix-template"><div class="p-4">Matrix</div></template>
<template id="morpheme-hunt-template"><div class="p-4">Hunt</div></template>
<template id="spelling-chaining-template"><div class="p-4">Chain</div></template>

<script>
(function(){
  const pages = ['page-main-menu','page-morpheme-list','page-activity-menu','page-word-sums','page-fill-in-blanks','page-word-matrix','page-morpheme-hunt','page-spelling-chaining'];
  const pageBgMap = {
    'page-main-menu':'bg-activity-default','page-morpheme-list':'bg-activity-default','page-activity-menu':'bg-activity-default',
    'page-word-sums':'bg-activity-sums','page-fill-in-blanks':'bg-activity-cloze','page-word-matrix':'bg-activity-matrix',
    'page-morpheme-hunt':'bg-activity-hunt','page-spelling-chaining':'bg-activity-chaining'
  };
  let currentCategory='', currentMorpheme='';

  function applyActivityBackground(pageId){
    document.body.className = document.body.className.replace(/\\bbg-activity-\\w+\\b/g,'').trim();
    document.body.classList.add(pageBgMap[pageId]||'bg-activity-default');
  }
  function showPage(id){
    pages.forEach(pid=>{ const el=document.getElementById(pid); if(el) el.classList.toggle('hidden', pid!==id); });
    applyActivityBackground(id);
  }
  function showMorphemeList(category){
    currentCategory = category;
    const grid = document.getElementById('morpheme-grid');
    document.getElementById('morpheme-list-title').textContent = category[0].toUpperCase()+category.slice(1);
    grid.innerHTML = '';
    const morphemes = {
      prefixes: ["un-","re-","dis-","semi-","sub-","mis-","multi-","pre-","trans-","non-","fore-","inter-","over-","uni-","bi-","tri-"],
      suffixes: ["-s","-ing","-ed","-ly","-er","-est","-ful","-less","-tion","-able","-ible","-ure"],
      bases: ["aqua","aud","bio","port","rupt","scrib","spect","struct","tract","vid","ject","bene","dict","phon","photo"]
    };
    morphemes[category].forEach(morpheme=>{
      const btn=document.createElement('button');
      btn.className='card bg-white p-4 rounded-lg shadow-sm border text-center font-semibold text-slate-800 hover:border-violet-400 hover:text-violet-600';
      btn.textContent=morpheme;
      btn.addEventListener('click', ()=>showActivityMenu(morpheme));
      grid.appendChild(btn);
    });
    showPage('page-morpheme-list');
  }
  function showActivityMenu(morpheme){
    currentMorpheme=morpheme;
    document.getElementById('selected-morpheme-title').textContent=`'${morpheme}'`;
    document.getElementById('back-to-morpheme-list').onclick=()=>showMorphemeList(currentCategory);
    showPage('page-activity-menu');
  }

  // expose to window so inline-less buttons can call
  window._nav = { showMorphemeList, showActivityMenu, showPage };

  // wire category buttons
  document.querySelectorAll('[data-cat]').forEach(btn=>{
    btn.addEventListener('click', ()=>window._nav.showMorphemeList(btn.getAttribute('data-cat')));
  });
  document.getElementById('btn-back-main').addEventListener('click', ()=>window._nav.showPage('page-main-menu'));

  // wire activity cards
  document.querySelectorAll('#activity-grid [data-activity]').forEach(card=>{
    card.addEventListener('click', ()=>window._nav.showPage(card.getAttribute('data-activity')));
  });

  // initial
  showPage('page-main-menu');
})();
</script>
</body>
</html>
